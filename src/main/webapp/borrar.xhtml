<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Borrar</title>
        <link rel="stylesheet" href="borrar.css"></link>
        <script src="https://kit.fontawesome.com/22e24bcbd3.js" crossorigin="anonymous"></script>
    </h:head>
    <div class="container">

        <div class="screen">
            <div class="screen__content">
                <h:body onload="#{admin.listaUsuario()}">
                    <div class="box">
                        <h:form>
                            <div class="box2">
                                <div class="login__field" style="margin-left: 100px; margin-top: 50px">
                                    <br></br>
                                    <h1> 
                                        Borrar un usuario</h1>

                                </div>
                                <div class="login__field" style="text-align:center;">
                                    <br></br>
                                    <br></br>
                                    <br></br>
                                    <br></br>
                                    <h2> 
                                        Nombre de usuario</h2>


                                    <p:inputText  class="login__input" id="username" value="#{admin.user}"    ></p:inputText >
                                    <div class="errorMensaje" style="position: absolute; top:200px; z-index: 99999">
                                        <p:messages for="MessageId" showDetail="true"  closable="true"></p:messages>
                                    </div>
                                </div>

                                <div class="login__field2">
                                    <h:commandLink action="#{login.logout}" value="Logout" styleClass="button2 login__submit2">
                                        <i class="button__icon fas fa-sign-out-alt"></i>
                                    </h:commandLink>
                                </div>
                            </div>

                            <br /><br />

                            <br /><br />

                            <br /><br />

                            <h:message for="username"></h:message>
                            <br /><br />


                            <div class="errorMensaje" style="position: absolute; top:-5px;">
                                <p:messages for="MessageId" showDetail="true"  closable="true"></p:messages>
                            </div>
                            <div class="login__field">
                                <h:commandLink class="button login__submit" action="admin.xhtml" value="Volver atrás" styleClass="button login__submit">
                                    <i class="button__icon fas fa-backward"></i>
                                </h:commandLink>

                                <h:commandLink class="button login__submit" action="#{admin.listaUsuario()}" value="Actualizar tabla" styleClass="button login__submit">
                                    <i class="button__icon fas fa-sync"></i>
                                </h:commandLink>
                                <p:commandLink class="button login__submit"  value="Borrar" type="button" styleClass="button login__submit" style="text-decoration:none;color: #4C489D;;" onclick="PF('deleteDlg').show()">
                                    <i class="button__icon fas fa-user-slash "></i>
                                </p:commandLink>
                                <p:confirmDialog  widgetVar="deleteDlg" id="deleteDialog" header="Delete" message="Borrar al usuario indicado?" global="true"  showEffect="fade" hideEffect="explode" width="400" closable="true" severity="alert">
                                    <h:panelGroup layout="block" style="text-align: right">
                                        <p:commandButton value="Yes" action="#{admin.borrar()}" oncomplete="PF('deleteDlg').hide()" />
                                        <p:commandButton value="No"   onclick="PF('deleteDlg').hide()" />
                                    </h:panelGroup>
                                </p:confirmDialog>
                            </div>


                        </h:form>

                    </div>
                    <div class="tabla">
                        <h:form>
                            <p:dataTable  value="#{admin.users}" var="user22"  filteredValue="#{admin.usersFiltrados}"  widgetVar="customersTable" emptyMessage="No hay coincidencias" paginator="true"
                                          paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                          currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                                          rowsPerPageTemplate="5,10,{ShowAll|'All'}" style="table-layout: auto;">
                                <f:facet name="header">
                                    <h:outputText value="Búsqueda global:" />
                                    <p:inputText id="globalFilter" onkeyup="PF('customersTable').filter()" style="width:150px" />
                                    <p:separator />

                                </f:facet>
                              
                                <p:column  headerText="Nombre usuario"  filterBy="#{user22.username}" filterMatchMode="contains">
                                    <h:outputText value="#{user22.username}" />
                                </p:column>
                                <p:column  headerText="Nombre y apellidos"  filterBy="#{user22.nomapel}" filterMatchMode="contains">
                                    <h:outputText value="#{user22.nomapel}" />
                                </p:column>
                                <p:column headerText="Tipo usuario" filterBy="#{user22.type}"  filterMatchMode="contains">
                                    <h:outputText value="#{user22.type}" />
                                </p:column>
                                <p:column headerText="Ultima conexion" filterBy="#{user22.ulticonfec}"  filterMatchMode="contains" >
                                    <h:outputText value="#{user22.ulticonfec}" />
                                </p:column>

                            </p:dataTable>
                        </h:form>
                    </div>


                </h:body>
            </div>
            <div class="screen__background"> <span class="screen__background__shape screen__background__shape4"></span>
                <span class="screen__background__shape screen__background__shape3"></span>		
                <span class="screen__background__shape screen__background__shape2"></span>
                <span class="screen__background__shape screen__background__shape1"></span></div>

        </div>
    </div>
</html>
